import 'package:flutter/foundation.dart';
import 'package:flutter/material.dart';

class AppLocalizations {
  AppLocalizations(this.locale);

  final Locale locale;

  static const List<Locale> supportedLocales = <Locale>[
    Locale('he'),
    Locale('ar'),
    Locale('en'),
  ];

  static const Map<String, Map<String, String>> _localizedValues = <String, Map<String, String>>{
    'he': <String, String>{
      'app.title.food': 'שליח אוכל',
      'app.title.booking': 'הזמנת עסקים',
      'home.title.food': 'מה תרצה לאכול?',
      'home.title.booking': 'איזה שירות תרצה להזמין?',
      'home.notifications': 'התראות',
      'home.search.food': 'מה תרצה לקנות?',
      'home.search.booking': 'איזה שירות מחפשים היום?',
      'home.section.recommended.food': 'מומלצים',
      'home.section.recommended.booking': 'שירותים מובילים',
      'home.section.best.food': 'המנות הטובות ביותר',
      'home.section.best.booking': 'עסקים מובילים',
      'home.menu.nearby': 'קרוב אליי',
      'home.menu.summary': 'סיכום',
      'home.menu.account': 'חשבון',
      'business_type.barber': 'ספרים',
      'business_type.hair_salon': 'מספרות',
      'business_type.spa': 'ספא',
      'business_type.clinic': 'קליניקות',
      'business_type.makeup': 'איפור',
      'business_type.massage': 'עיסוי',
      'food_type.burger': 'המבורגר',
      'food_type.sushi': 'סושי',
      'food_type.pizza': 'פיצה',
      'food_type.cake': 'עוגה',
      'food_type.ice_cream': 'גלידה',
      'food_type.soft_drink': 'משקה',
      'service.haircut_lux': 'תספורת פרימיום',
      'service.spa_signature': 'טיפול ספא סיגנצ"ר',
      'service.barber_classic': 'תספורת קלאסית',
      'service.facial_refresh': 'טיפול פנים מרענן',
      'service.desc.barber_classic': 'תספורת קלאסית עם עיצוב זקן וניקוי קווי מתאר.',
      'service.desc.haircut_lux': 'תספורת מלאה כולל שטיפה וטיפול בקרקפת.',
      'service.desc.spa_signature': 'טקס ספא מלא עם מסאג" והרבה פינוק.',
      'service.desc.facial_refresh': 'ניקוי עמוק, פילינג והחזרת לחות לעור.',
      'service.duration.minutes': '%d דקות',
      'business.mirror_masters': 'מירור מאסטרס',
      'business.true_fade': 'טרו פייד ברבר',
      'business.zen_garden': 'זן גארדן ספא',
      'business.desc.mirror_masters': 'סטודיו מספרה בוטיק עם צוות מנוסה.',
      'business.desc.zen_garden': 'מרכז ספא הוליסטי לשחרור מוחלט.',
      'business.branch.city_center': 'סניף מרכז העיר',
      'business.branch.city_center_address': 'אבן גבירול 12, תל אביב',
      'business.branch.harbor': 'סניף הנמל',
      'business.branch.harbor_address': 'רציף 3, תל אביב',
      'business.branch.park': 'סניף הפארק',
      'business.branch.park_address': 'שדרות השלום 4, חיפה',
      'staff.yosef': 'יוסף',
      'staff.adam': 'אדם',
      'staff.nava': 'נאווה',
      'booking.staff.title': 'בחרו איש צוות',
      'booking.branch.title': 'בחרו סניף',
      'booking.date.title': 'בחרו מועד',
      'booking.summary.title': 'סיכום הזמנה',
      'booking.summary.service': 'שירות',
      'booking.summary.staff': 'איש צוות',
      'booking.summary.time': 'זמן',
      'booking.summary.branch': 'סניף',
      'booking.summary.price': 'מחיר',
      'booking.summary.total': 'סה"כ לתשלום',
      'booking.summary.confirm': 'אישור הזמנה',
      'booking.summary.deposit_optional': 'תשלום מקדמה (אופציונלי)',
      'booking.summary.success': 'ההזמנה אושרה!',
      'booking.summary.add_to_calendar': 'הוספה ליומן',
      'booking.summary.manage': 'ניהול הזמנה',
      'booking.summary.notes': 'הערה',
      'booking.staff.auto': 'הקצה לי איש צוות אוטומטית',
      'booking.slots.none': 'אין זמינות ביום שנבחר. נסו יום אחר.',
      'booking.slots.available': 'זמנים פנויים',
      'booking.button.review': 'המשיכו לסיכום',
      'booking.button.confirm': 'אישור ותשלום',
      'booking.alert.added': 'קובץ iCalendar נוצר בהצלחה.',
      'booking.alert.unavailable': 'בחרו שירות וזמן כדי להמשיך.',
      'booking.history.title': 'ההזמנות שלי',
      'booking.status.pending': 'ממתין',
      'booking.status.confirmed': 'אושר',
      'booking.status.cancelled': 'בוטל',
      'booking.status.completed': 'הושלם',
      'booking.status.no_show': 'לא הופיע',
      'booking.deposit.note': 'מקדמה נגבית רק לשירותים נבחרים.',
      'booking.select_service': 'בחרו שירות להזמנה',
      'booking.about': 'אודות העסק',
      'booking.working_hours': 'שעות פעילות',
      'booking.staff.subtitle': 'בחרו אנשי צוות זמינים לשירות',
      'booking.notes.hint': 'הערות לבעלי העסק',
      'booking.summary.completed': 'ההזמנה נשמרה. נתראה בקרוב!',
      'booking.analytics.view_business': 'צפייה בעסק',
      'booking.analytics.select_service': 'בחירת שירות',
      'booking.analytics.select_slot': 'בחירת מועד',
      'booking.analytics.booking_confirmed': 'הזמנה אושרה',
      'booking.analytics.booking_cancelled': 'הזמנה בוטלה',
      'booking.analytics.no_show': 'סימון אי הגעה',
      'food.grilled_salmon': 'סלמון על הגריל',
      'food.meat_veggie': 'בשר עם ירקות',
      'food.mixed_salad': 'סלט מעורב',
      'food.by_pizza_hut': 'מבית פיצה האט',
      'cart.title': 'סל הקניות',
      'cart.section': 'הזמנה',
      'cart.payment_method': 'שיטת תשלום',
      'cart.credit_card': 'כרטיס אשראי',
    },
    'ar': <String, String>{
      'app.title.food': 'توصيل طعام',
      'app.title.booking': 'حجوزات أعمال',
      'home.title.food': 'ماذا تريد أن تأكل؟',
      'home.title.booking': 'أي خدمة ترغب بحجزها؟',
      'home.notifications': 'الإشعارات',
      'home.search.food': 'ما الذي ترغب بشرائه؟',
      'home.search.booking': 'ما الخدمة التي تبحث عنها اليوم؟',
      'home.section.recommended.food': 'مختارات',
      'home.section.recommended.booking': 'خدمات مميزة',
      'home.section.best.food': 'أفضل الأطباق',
      'home.section.best.booking': 'أفضل الأعمال',
      'home.menu.nearby': 'بالقرب',
      'home.menu.summary': 'الملخص',
      'home.menu.account': 'الحساب',
      'business_type.barber': 'حلاقة',
      'business_type.hair_salon': 'صالونات شعر',
      'business_type.spa': 'منتجعات صحية',
      'business_type.clinic': 'عيادات',
      'business_type.makeup': 'مكياج',
      'business_type.massage': 'تدليك',
      'food_type.burger': 'برجر',
      'food_type.sushi': 'سوشي',
      'food_type.pizza': 'بيتزا',
      'food_type.cake': 'كعكة',
      'food_type.ice_cream': 'بوظة',
      'food_type.soft_drink': 'مشروب',
      'service.haircut_lux': 'حلاقة فاخرة',
      'service.spa_signature': 'جلسة سبا مميزة',
      'service.barber_classic': 'حلاقة كلاسيكية',
      'service.facial_refresh': 'عناية بالوجه',
      'service.desc.barber_classic': 'حلاقة كلاسيكية مع تهذيب اللحية وتنظيف دقيق.',
      'service.desc.haircut_lux': 'حلاقة كاملة مع غسيل وعلاج فروة الرأس.',
      'service.desc.spa_signature': 'طقس سبا متكامل مع تدليك وزيوت عطرية.',
      'service.desc.facial_refresh': 'تنظيف عميق وتقشير وترطيب للبشرة.',
      'service.duration.minutes': '%d دقيقة',
      'business.mirror_masters': 'مرآة ماسترز',
      'business.true_fade': 'ترو فايد',
      'business.zen_garden': 'حديقة زن',
      'business.desc.mirror_masters': 'صالون بوتيك مع فريق محترف.',
      'business.desc.zen_garden': 'مركز سبا شامل للاسترخاء التام.',
      'business.branch.city_center': 'فرع وسط المدينة',
      'business.branch.city_center_address': 'ابن جفيرول 12، تل أبيب',
      'business.branch.harbor': 'فرع الميناء',
      'business.branch.harbor_address': 'رصيف 3، تل أبيب',
      'business.branch.park': 'فرع الحديقة',
      'business.branch.park_address': 'شارع هاشالوم 4، حيفا',
      'staff.yosef': 'يوسف',
      'staff.adam': 'آدم',
      'staff.nava': 'نَڤا',
      'booking.staff.title': 'اختر الموظف',
      'booking.branch.title': 'اختر الفرع',
      'booking.date.title': 'اختر الموعد',
      'booking.summary.title': 'ملخص الحجز',
      'booking.summary.service': 'الخدمة',
      'booking.summary.staff': 'الموظف',
      'booking.summary.time': 'الوقت',
      'booking.summary.branch': 'الفرع',
      'booking.summary.price': 'السعر',
      'booking.summary.total': 'الإجمالي',
      'booking.summary.confirm': 'تأكيد الحجز',
      'booking.summary.deposit_optional': 'دفع عربون (اختياري)',
      'booking.summary.success': 'تم تأكيد الحجز!',
      'booking.summary.add_to_calendar': 'أضف إلى التقويم',
      'booking.summary.manage': 'إدارة الحجز',
      'booking.summary.notes': 'ملاحظة',
      'booking.staff.auto': 'تعيين موظف تلقائياً',
      'booking.slots.none': 'لا توجد أوقات متاحة. جرّب يوماً آخر.',
      'booking.slots.available': 'أوقات متاحة',
      'booking.button.review': 'المتابعة للملخص',
      'booking.button.confirm': 'تأكيد والدفع',
      'booking.alert.added': 'تم إنشاء ملف iCalendar.',
      'booking.alert.unavailable': 'اختر خدمة ووقتاً للاستمرار.',
      'booking.history.title': 'حجوزاتي',
      'booking.status.pending': 'بانتظار',
      'booking.status.confirmed': 'مؤكد',
      'booking.status.cancelled': 'ملغى',
      'booking.status.completed': 'مكتمل',
      'booking.status.no_show': 'لم يحضر',
      'booking.deposit.note': 'يتم تحصيل العربون لخدمات محددة فقط.',
      'booking.select_service': 'اختر خدمة للحجز',
      'booking.about': 'عن العمل',
      'booking.working_hours': 'ساعات العمل',
      'booking.staff.subtitle': 'اختر موظفين متاحين للخدمة',
      'booking.notes.hint': 'ملاحظات لأصحاب العمل',
      'booking.summary.completed': 'تم حفظ الحجز. نراكم قريباً!',
      'booking.analytics.view_business': 'عرض العمل',
      'booking.analytics.select_service': 'اختيار الخدمة',
      'booking.analytics.select_slot': 'اختيار الموعد',
      'booking.analytics.booking_confirmed': 'تأكيد الحجز',
      'booking.analytics.booking_cancelled': 'إلغاء الحجز',
      'booking.analytics.no_show': 'تحديد عدم الحضور',
      'food.grilled_salmon': 'سلمون مشوي',
      'food.meat_veggie': 'لحم مع خضار',
      'food.mixed_salad': 'سلطة مشكلة',
      'food.by_pizza_hut': 'من بيتزا هت',
      'cart.title': 'سلة المشتريات',
      'cart.section': 'الطلب',
      'cart.payment_method': 'طريقة الدفع',
      'cart.credit_card': 'بطاقة ائتمان',
    },
    'en': <String, String>{
      'app.title.food': 'Food Delivery',
      'app.title.booking': 'Business Booking',
      'home.title.food': 'What would you like to eat?',
      'home.title.booking': 'Which service would you like to book?',
      'home.notifications': 'Notifications',
      'home.search.food': 'What would you like to buy?',
      'home.search.booking': 'Which service are you looking for today?',
      'home.section.recommended.food': 'Popular Foods',
      'home.section.recommended.booking': 'Top Services',
      'home.section.best.food': 'Best Foods',
      'home.section.best.booking': 'Featured Businesses',
      'home.menu.nearby': 'Nearby',
      'home.menu.summary': 'Summary',
      'home.menu.account': 'Account',
      'business_type.barber': 'Barbers',
      'business_type.hair_salon': 'Hair Salons',
      'business_type.spa': 'Spas',
      'business_type.clinic': 'Clinics',
      'business_type.makeup': 'Makeup',
      'business_type.massage': 'Massage',
      'food_type.burger': 'Burger',
      'food_type.sushi': 'Sushi',
      'food_type.pizza': 'Pizza',
      'food_type.cake': 'Cake',
      'food_type.ice_cream': 'Ice Cream',
      'food_type.soft_drink': 'Soft Drink',
      'service.haircut_lux': 'Luxury Haircut',
      'service.spa_signature': 'Signature Spa Ritual',
      'service.barber_classic': 'Classic Barber Cut',
      'service.facial_refresh': 'Facial Refresh',
      'service.desc.barber_classic': 'Traditional haircut with beard styling and clean finish.',
      'service.desc.haircut_lux': 'Full haircut package with wash and scalp treatment.',
      'service.desc.spa_signature': 'Full spa ceremony with massage, aromatherapy, and tea.',
      'service.desc.facial_refresh': 'Deep cleanse, peel, and hydration boost.',
      'service.duration.minutes': '%d minutes',
      'business.mirror_masters': 'Mirror Masters',
      'business.true_fade': 'True Fade Barber',
      'business.zen_garden': 'Zen Garden Spa',
      'business.desc.mirror_masters': 'Boutique salon studio with an experienced crew.',
      'business.desc.zen_garden': 'Holistic spa center for total relaxation.',
      'business.branch.city_center': 'City Center Branch',
      'business.branch.city_center_address': '12 Ibn Gabirol, Tel Aviv',
      'business.branch.harbor': 'Harbor Branch',
      'business.branch.harbor_address': 'Pier 3, Tel Aviv',
      'business.branch.park': 'Park Branch',
      'business.branch.park_address': '4 HaShalom Blvd, Haifa',
      'staff.yosef': 'Yosef',
      'staff.adam': 'Adam',
      'staff.nava': 'Nava',
      'booking.staff.title': 'Choose Staff',
      'booking.branch.title': 'Choose Branch',
      'booking.date.title': 'Choose Date',
      'booking.summary.title': 'Booking Summary',
      'booking.summary.service': 'Service',
      'booking.summary.staff': 'Staff',
      'booking.summary.time': 'Time',
      'booking.summary.branch': 'Branch',
      'booking.summary.price': 'Price',
      'booking.summary.total': 'Total',
      'booking.summary.confirm': 'Confirm Booking',
      'booking.summary.deposit_optional': 'Deposit (optional)',
      'booking.summary.success': 'Booking Confirmed!',
      'booking.summary.add_to_calendar': 'Add to Calendar',
      'booking.summary.manage': 'Manage Booking',
      'booking.summary.notes': 'Note',
      'booking.staff.auto': 'Assign staff automatically',
      'booking.slots.none': 'No availability for the selected day. Try another date.',
      'booking.slots.available': 'Available Slots',
      'booking.button.review': 'Review Summary',
      'booking.button.confirm': 'Confirm & Pay',
      'booking.alert.added': 'iCalendar file generated.',
      'booking.alert.unavailable': 'Select a service and time to continue.',
      'booking.history.title': 'My Bookings',
      'booking.status.pending': 'Pending',
      'booking.status.confirmed': 'Confirmed',
      'booking.status.cancelled': 'Cancelled',
      'booking.status.completed': 'Completed',
      'booking.status.no_show': 'No-show',
      'booking.deposit.note': 'Deposits are charged for select services only.',
      'booking.select_service': 'Select a service to book',
      'booking.about': 'About the business',
      'booking.working_hours': 'Working hours',
      'booking.staff.subtitle': 'Choose team members available for the service',
      'booking.notes.hint': 'Notes for the business',
      'booking.summary.completed': 'Booking saved. See you soon!',
      'booking.analytics.view_business': 'View business',
      'booking.analytics.select_service': 'Select service',
      'booking.analytics.select_slot': 'Select slot',
      'booking.analytics.booking_confirmed': 'Booking confirmed',
      'booking.analytics.booking_cancelled': 'Booking cancelled',
      'booking.analytics.no_show': 'No-show marked',
      'food.grilled_salmon': 'Grilled Salmon',
      'food.meat_veggie': 'Meat with Vegetables',
      'food.mixed_salad': 'Mixed Salad',
      'food.by_pizza_hut': 'By Pizza Hut',
      'cart.title': 'Item Carts',
      'cart.section': 'Your Food Cart',
      'cart.payment_method': 'Payment Method',
      'cart.credit_card': 'Credit / Debit Card',
    },
  };

  static AppLocalizations? of(BuildContext context) {
    return Localizations.of<AppLocalizations>(context, AppLocalizations);
  }

  String translate(String key, {int? count}) {
    final Map<String, String>? values = _localizedValues[locale.languageCode];
    final Map<String, String> fallback = _localizedValues['en']!;
    String result = (values != null ? values[key] : null) ?? fallback[key] ?? key;
    if (count != null) {
      result = result.replaceAll('%d', '$count');
    }
    return result;
  }

  TextDirection get textDirection {
    if (locale.languageCode == 'he' || locale.languageCode == 'ar') {
      return TextDirection.rtl;
    }
    return TextDirection.ltr;
  }
}

class AppLocalizationsDelegate extends LocalizationsDelegate<AppLocalizations> {
  const AppLocalizationsDelegate();

  @override
  bool isSupported(Locale locale) {
    return AppLocalizations.supportedLocales
        .map((Locale supportedLocale) => supportedLocale.languageCode)
        .contains(locale.languageCode);
  }

  @override
  Future<AppLocalizations> load(Locale locale) async {
    return SynchronousFuture<AppLocalizations>(AppLocalizations(locale));
  }

  @override
  bool shouldReload(covariant LocalizationsDelegate<AppLocalizations> old) {
    return false;
  }
}
